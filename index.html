<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>yolk generator</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@yolko0no">
  <meta name="twitter:title" content="Home">
  <meta name="twitter:image" content="https://brat.yolko0no.com/yolk.png">
  <meta name="twitter:image:alt" content="yolk">
  <link rel="canonical" href="https://brat.yolko0no.com">
  <!-- Fathom - beautiful, simple website analytics -->
                <script src="https://cdn.usefathom.com/script.js" data-site="ILBPHJZV" defer></script>
              <!-- / Fathom -->

  <style id="compiled-css" type="text/css">
    html, body {
  padding:0;
  margin:0;
  width:100%;
  height:100%;
  min-height: 100vh;
  background: #8ACF00;
}
body {
  font-family: arial, sans-serif;
  padding: 2em;
  box-sizing: border-box;
}
input {
  text-align:center;
  width: 50%;
  margin: auto;
  display: block;
}
.image {
  width: 80vh;
  height:100%;
  max-height: 80vh;
  max-width: 80vh;
  display: grid;
  margin:2em auto;
  align-items: center;
  justify-content: center;
  text-align:center;
  position: relative;
  box-sizing: border-box;
}
.output {
  position: absolute;
  display: block;
  width:100%;
  height:100%;
  outline: 0;
  border:0;
  top:0;
  left:0;
  right:0;
  bottom:0;
  object-fit: cover;
}
    img {
      outline:0;
    }
    .text {
      display: inline-block;
    }

.text-output {
  font-size: 10vh;
  transform:scaleY(121%);
  width:80vh;
  max-width: 90vw;
  max-height: 75vw;
  text-wrap: wrap;
  word-break: break-all;
  position: relative;
  text-shadow: 0 0 0.03em black;
  color: transparent;
  box-sizing: border-box;
  line-height: 1;
}

fieldset {
  outline:0;
  border:0;
  margin:0;
  text-align:center;
}

input[type="checkbox"] {
  display:inline;
  width: auto;
  margin-right:1em;
}

label {
  display: inline;
}

.greenfilter {
  position: absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  display: none;
  background: #73ab03;
  mix-blend-mode: color;
}

.greenfilter.visible {
  display: block;
}

/* Portrait */
@media screen and (orientation:portrait) {
    body {
      padding: 2em 0;
    }
  .image {
      width: 100vw;
      max-width: 100vw;
      max-height: 100vw;
    }
    .text-output {
      font-size: 13vw;
    }
}
    .go-to {
      width: 2rem;
      height: 2rem;
      position: absolute;
      top: 0;
      right:0;
      background:#fff;
      display: block;
    }
  </style>
</head>
<body>
  <a href="/except-its-white.html" class="go-to"></a>
    <input type="file" />
    <fieldset>
      <input type="checkbox" name="green" id="green"><label for="green">make it green</label></fieldset>
<div class="image">
  <img class="output" />
  <div class="greenfilter"></div>
  <span class="text" contenteditable="true" spellcheck="false">
    yolk
    </span>
</div>

    <script type="text/javascript">

const fileInput = document.querySelector("input[type=file]");
const output = document.querySelector(".output");
const greenify = document.querySelector("input[type=checkbox]");
const greenfilter = document.querySelector(".greenfilter");

greenify.addEventListener("change", async() => {
  greenfilter.classList.toggle("visible");
})

fileInput.addEventListener("change", async () => {
  const [file] = fileInput.files;
  
  URL.revokeObjectURL(output.src);

  if (file) {
    output.src = URL.createObjectURL(file);
  }
});
  </script>
    <script>
   const isOverflown = ({ clientHeight, scrollHeight }) => scrollHeight > clientHeight

const resizeText = ({ element, elements, minSize = 0, maxSize = 15, step = 0.01, unit = 'vw' }) => {
  (elements || [element]).forEach(el => {
    let i = minSize
    let overflow = false

        const parent = el.parentNode

    while (!overflow && i < maxSize) {
        el.style.fontSize = `${i}${unit}`
        overflow = isOverflown(parent)

      if (!overflow) i += step
    }

    // revert to last state where no overflow happened
    el.style.fontSize = `${i - step}${unit}`
  })
}
    resizeText({
  elements: document.querySelectorAll('.text')
})
    
  </script>
  <script>
    
    function debounce(func) {
      var timer;
      return function(event) {
        if(timer) clearTimeout(timer);
        timer = setTimeout(func, 200, event);
      };
    };
    document.querySelector('.text').addEventListener("blur", function(e) {
      resizeText({
        elements:document.querySelectorAll('.text')
      })
    });
    window.addEventListener('resize', debounce(function(e) {
      resizeText({
        elements:document.querySelectorAll('.text')
      })
    }))
  </script>
  <script>
    document.querySelector("span[contenteditable]").addEventListener("paste", function(e) {
      e.preventDefault();
      var text = e.clipboardData.getData("text/plain");
      document.execCommand("insertHTML", false, text);
    });
  </script>

</body>
</html>
